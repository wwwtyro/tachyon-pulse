!function e(n,t,r){function a(i,u){if(!t[i]){if(!n[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(o)return o(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var f=t[i]={exports:{}};n[i][0].call(f.exports,function(e){var t=n[i][1][e];return a(t?t:e)},f,f.exports,e,n,t,r)}return t[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,n,t){!function(){"use strict";var e={};"undefined"==typeof t?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e.exports={},define(function(){return e.exports})):e.exports=window:e.exports=t,function(e){if(!n)var n=1e-6;if(!t)var t="undefined"!=typeof Float32Array?Float32Array:Array;var r={};r.setMatrixArrayType=function(e){t=e},"undefined"!=typeof e&&(e.glMatrix=r);var a={};a.create=function(){var e=new t(2);return e[0]=0,e[1]=0,e},a.clone=function(e){var n=new t(2);return n[0]=e[0],n[1]=e[1],n},a.fromValues=function(e,n){var r=new t(2);return r[0]=e,r[1]=n,r},a.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e},a.set=function(e,n,t){return e[0]=n,e[1]=t,e},a.add=function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e},a.subtract=function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e},a.sub=a.subtract,a.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e},a.mul=a.multiply,a.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e},a.div=a.divide,a.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e},a.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e},a.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e},a.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1];return Math.sqrt(t*t+r*r)},a.dist=a.distance,a.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1];return t*t+r*r},a.sqrDist=a.squaredDistance,a.length=function(e){var n=e[0],t=e[1];return Math.sqrt(n*n+t*t)},a.len=a.length,a.squaredLength=function(e){var n=e[0],t=e[1];return n*n+t*t},a.sqrLen=a.squaredLength,a.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e},a.normalize=function(e,n){var t=n[0],r=n[1],a=t*t+r*r;return a>0&&(a=1/Math.sqrt(a),e[0]=n[0]*a,e[1]=n[1]*a),e},a.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]},a.cross=function(e,n,t){var r=n[0]*t[1]-n[1]*t[0];return e[0]=e[1]=0,e[2]=r,e},a.lerp=function(e,n,t,r){var a=n[0],o=n[1];return e[0]=a+r*(t[0]-a),e[1]=o+r*(t[1]-o),e},a.transformMat2=function(e,n,t){var r=n[0],a=n[1];return e[0]=t[0]*r+t[2]*a,e[1]=t[1]*r+t[3]*a,e},a.transformMat2d=function(e,n,t){var r=n[0],a=n[1];return e[0]=t[0]*r+t[2]*a+t[4],e[1]=t[1]*r+t[3]*a+t[5],e},a.transformMat3=function(e,n,t){var r=n[0],a=n[1];return e[0]=t[0]*r+t[3]*a+t[6],e[1]=t[1]*r+t[4]*a+t[7],e},a.transformMat4=function(e,n,t){var r=n[0],a=n[1];return e[0]=t[0]*r+t[4]*a+t[12],e[1]=t[1]*r+t[5]*a+t[13],e},a.forEach=function(){var e=a.create();return function(n,t,r,a,o,i){var u,c;for(t||(t=2),r||(r=0),c=a?Math.min(a*t+r,n.length):n.length,u=r;c>u;u+=t)e[0]=n[u],e[1]=n[u+1],o(e,e,i),n[u]=e[0],n[u+1]=e[1];return n}}(),a.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},"undefined"!=typeof e&&(e.vec2=a);var o={};o.create=function(){var e=new t(3);return e[0]=0,e[1]=0,e[2]=0,e},o.clone=function(e){var n=new t(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n},o.fromValues=function(e,n,r){var a=new t(3);return a[0]=e,a[1]=n,a[2]=r,a},o.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e},o.set=function(e,n,t,r){return e[0]=n,e[1]=t,e[2]=r,e},o.add=function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e},o.subtract=function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e},o.sub=o.subtract,o.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e},o.mul=o.multiply,o.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e},o.div=o.divide,o.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e},o.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e},o.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e},o.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],a=n[2]-e[2];return Math.sqrt(t*t+r*r+a*a)},o.dist=o.distance,o.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],a=n[2]-e[2];return t*t+r*r+a*a},o.sqrDist=o.squaredDistance,o.length=function(e){var n=e[0],t=e[1],r=e[2];return Math.sqrt(n*n+t*t+r*r)},o.len=o.length,o.squaredLength=function(e){var n=e[0],t=e[1],r=e[2];return n*n+t*t+r*r},o.sqrLen=o.squaredLength,o.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e},o.normalize=function(e,n){var t=n[0],r=n[1],a=n[2],o=t*t+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o),e},o.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},o.cross=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=t[0],u=t[1],c=t[2];return e[0]=a*c-o*u,e[1]=o*i-r*c,e[2]=r*u-a*i,e},o.lerp=function(e,n,t,r){var a=n[0],o=n[1],i=n[2];return e[0]=a+r*(t[0]-a),e[1]=o+r*(t[1]-o),e[2]=i+r*(t[2]-i),e},o.transformMat4=function(e,n,t){var r=n[0],a=n[1],o=n[2];return e[0]=t[0]*r+t[4]*a+t[8]*o+t[12],e[1]=t[1]*r+t[5]*a+t[9]*o+t[13],e[2]=t[2]*r+t[6]*a+t[10]*o+t[14],e},o.transformQuat=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=t[0],u=t[1],c=t[2],s=t[3],f=s*r+u*o-c*a,l=s*a+c*r-i*o,d=s*o+i*a-u*r,p=-i*r-u*a-c*o;return e[0]=f*s+p*-i+l*-c-d*-u,e[1]=l*s+p*-u+d*-i-f*-c,e[2]=d*s+p*-c+f*-u-l*-i,e},o.forEach=function(){var e=o.create();return function(n,t,r,a,o,i){var u,c;for(t||(t=3),r||(r=0),c=a?Math.min(a*t+r,n.length):n.length,u=r;c>u;u+=t)e[0]=n[u],e[1]=n[u+1],e[2]=n[u+2],o(e,e,i),n[u]=e[0],n[u+1]=e[1],n[u+2]=e[2];return n}}(),o.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},"undefined"!=typeof e&&(e.vec3=o);var i={};i.create=function(){var e=new t(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},i.clone=function(e){var n=new t(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},i.fromValues=function(e,n,r,a){var o=new t(4);return o[0]=e,o[1]=n,o[2]=r,o[3]=a,o},i.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},i.set=function(e,n,t,r,a){return e[0]=n,e[1]=t,e[2]=r,e[3]=a,e},i.add=function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e[3]=n[3]+t[3],e},i.subtract=function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e[3]=n[3]-t[3],e},i.sub=i.subtract,i.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e[3]=n[3]*t[3],e},i.mul=i.multiply,i.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e[3]=n[3]/t[3],e},i.div=i.divide,i.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e[3]=Math.min(n[3],t[3]),e},i.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e[3]=Math.max(n[3],t[3]),e},i.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e},i.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],a=n[2]-e[2],o=n[3]-e[3];return Math.sqrt(t*t+r*r+a*a+o*o)},i.dist=i.distance,i.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],a=n[2]-e[2],o=n[3]-e[3];return t*t+r*r+a*a+o*o},i.sqrDist=i.squaredDistance,i.length=function(e){var n=e[0],t=e[1],r=e[2],a=e[3];return Math.sqrt(n*n+t*t+r*r+a*a)},i.len=i.length,i.squaredLength=function(e){var n=e[0],t=e[1],r=e[2],a=e[3];return n*n+t*t+r*r+a*a},i.sqrLen=i.squaredLength,i.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e},i.normalize=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=t*t+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=n[3]*i),e},i.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]},i.lerp=function(e,n,t,r){var a=n[0],o=n[1],i=n[2],u=n[3];return e[0]=a+r*(t[0]-a),e[1]=o+r*(t[1]-o),e[2]=i+r*(t[2]-i),e[3]=u+r*(t[3]-u),e},i.transformMat4=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3];return e[0]=t[0]*r+t[4]*a+t[8]*o+t[12]*i,e[1]=t[1]*r+t[5]*a+t[9]*o+t[13]*i,e[2]=t[2]*r+t[6]*a+t[10]*o+t[14]*i,e[3]=t[3]*r+t[7]*a+t[11]*o+t[15]*i,e},i.transformQuat=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=t[0],u=t[1],c=t[2],s=t[3],f=s*r+u*o-c*a,l=s*a+c*r-i*o,d=s*o+i*a-u*r,p=-i*r-u*a-c*o;return e[0]=f*s+p*-i+l*-c-d*-u,e[1]=l*s+p*-u+d*-i-f*-c,e[2]=d*s+p*-c+f*-u-l*-i,e},i.forEach=function(){var e=i.create();return function(n,t,r,a,o,i){var u,c;for(t||(t=4),r||(r=0),c=a?Math.min(a*t+r,n.length):n.length,u=r;c>u;u+=t)e[0]=n[u],e[1]=n[u+1],e[2]=n[u+2],e[3]=n[u+3],o(e,e,i),n[u]=e[0],n[u+1]=e[1],n[u+2]=e[2],n[u+3]=e[3];return n}}(),i.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.vec4=i);{var u={};new Float32Array([1,0,0,1])}u.create=function(){var e=new t(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},u.clone=function(e){var n=new t(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},u.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},u.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},u.transpose=function(e,n){if(e===n){var t=n[1];e[1]=n[2],e[2]=t}else e[0]=n[0],e[1]=n[2],e[2]=n[1],e[3]=n[3];return e},u.invert=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=t*o-a*r;return i?(i=1/i,e[0]=o*i,e[1]=-r*i,e[2]=-a*i,e[3]=t*i,e):null},u.adjoint=function(e,n){var t=n[0];return e[0]=n[3],e[1]=-n[1],e[2]=-n[2],e[3]=t,e},u.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},u.multiply=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=t[0],c=t[1],s=t[2],f=t[3];return e[0]=r*u+a*s,e[1]=r*c+a*f,e[2]=o*u+i*s,e[3]=o*c+i*f,e},u.mul=u.multiply,u.rotate=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(t),c=Math.cos(t);return e[0]=r*c+a*u,e[1]=r*-u+a*c,e[2]=o*c+i*u,e[3]=o*-u+i*c,e},u.scale=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=t[0],c=t[1];return e[0]=r*u,e[1]=a*c,e[2]=o*u,e[3]=i*c,e},u.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.mat2=u);{var c={};new Float32Array([1,0,0,1,0,0])}c.create=function(){var e=new t(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},c.clone=function(e){var n=new t(6);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n},c.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e},c.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},c.invert=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=t*o-r*a;return c?(c=1/c,e[0]=o*c,e[1]=-r*c,e[2]=-a*c,e[3]=t*c,e[4]=(a*u-o*i)*c,e[5]=(r*i-t*u)*c,e):null},c.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},c.multiply=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=t[0],f=t[1],l=t[2],d=t[3],p=t[4],v=t[5];return e[0]=r*s+a*l,e[1]=r*f+a*d,e[2]=o*s+i*l,e[3]=o*f+i*d,e[4]=s*u+l*c+p,e[5]=f*u+d*c+v,e},c.mul=c.multiply,c.rotate=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=Math.sin(t),f=Math.cos(t);return e[0]=r*f+a*s,e[1]=-r*s+a*f,e[2]=o*f+i*s,e[3]=-o*s+f*i,e[4]=f*u+s*c,e[5]=f*c-s*u,e},c.scale=function(e,n,t){var r=t[0],a=t[1];return e[0]=n[0]*r,e[1]=n[1]*a,e[2]=n[2]*r,e[3]=n[3]*a,e[4]=n[4]*r,e[5]=n[5]*a,e},c.translate=function(e,n,t){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4]+t[0],e[5]=n[5]+t[1],e},c.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},"undefined"!=typeof e&&(e.mat2d=c);{var s={};new Float32Array([1,0,0,0,1,0,0,0,1])}s.create=function(){var e=new t(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},s.clone=function(e){var n=new t(9);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n},s.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},s.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},s.transpose=function(e,n){if(e===n){var t=n[1],r=n[2],a=n[5];e[1]=n[3],e[2]=n[6],e[3]=t,e[5]=n[7],e[6]=r,e[7]=a}else e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8];return e},s.invert=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=f*i-u*s,d=-f*o+u*c,p=s*o-i*c,v=t*l+r*d+a*p;return v?(v=1/v,e[0]=l*v,e[1]=(-f*r+a*s)*v,e[2]=(u*r-a*i)*v,e[3]=d*v,e[4]=(f*t-a*c)*v,e[5]=(-u*t+a*o)*v,e[6]=p*v,e[7]=(-s*t+r*c)*v,e[8]=(i*t-r*o)*v,e):null},s.adjoint=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8];return e[0]=i*f-u*s,e[1]=a*s-r*f,e[2]=r*u-a*i,e[3]=u*c-o*f,e[4]=t*f-a*c,e[5]=a*o-t*u,e[6]=o*s-i*c,e[7]=r*c-t*s,e[8]=t*i-r*o,e},s.determinant=function(e){var n=e[0],t=e[1],r=e[2],a=e[3],o=e[4],i=e[5],u=e[6],c=e[7],s=e[8];return n*(s*o-i*c)+t*(-s*a+i*u)+r*(c*a-o*u)},s.multiply=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],d=t[0],p=t[1],v=t[2],h=t[3],m=t[4],g=t[5],y=t[6],_=t[7],x=t[8];return e[0]=d*r+p*i+v*s,e[1]=d*a+p*u+v*f,e[2]=d*o+p*c+v*l,e[3]=h*r+m*i+g*s,e[4]=h*a+m*u+g*f,e[5]=h*o+m*c+g*l,e[6]=y*r+_*i+x*s,e[7]=y*a+_*u+x*f,e[8]=y*o+_*c+x*l,e},s.mul=s.multiply,s.translate=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],d=t[0],p=t[1];return e[0]=r,e[1]=a,e[2]=o,e[3]=i,e[4]=u,e[5]=c,e[6]=d*r+p*i+s,e[7]=d*a+p*u+f,e[8]=d*o+p*c+l,e},s.rotate=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],d=Math.sin(t),p=Math.cos(t);return e[0]=p*r+d*i,e[1]=p*a+d*u,e[2]=p*o+d*c,e[3]=p*i-d*r,e[4]=p*u-d*a,e[5]=p*c-d*o,e[6]=s,e[7]=f,e[8]=l,e},s.scale=function(e,n,t){var r=t[0],a=t[2];return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=a*n[3],e[4]=a*n[4],e[5]=a*n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},s.fromMat2d=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=0,e[3]=n[2],e[4]=n[3],e[5]=0,e[6]=n[4],e[7]=n[5],e[8]=1,e},s.fromQuat=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=t+t,u=r+r,c=a+a,s=t*i,f=t*u,l=t*c,d=r*u,p=r*c,v=a*c,h=o*i,m=o*u,g=o*c;return e[0]=1-(d+v),e[1]=f+g,e[2]=l-m,e[3]=f-g,e[4]=1-(s+v),e[5]=p+h,e[6]=l+m,e[7]=p-h,e[8]=1-(s+d),e},s.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},"undefined"!=typeof e&&(e.mat3=s);{var f={};new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}f.create=function(){var e=new t(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},f.clone=function(e){var n=new t(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},f.copy=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},f.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},f.transpose=function(e,n){if(e===n){var t=n[1],r=n[2],a=n[3],o=n[6],i=n[7],u=n[11];e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=t,e[6]=n[9],e[7]=n[13],e[8]=r,e[9]=o,e[11]=n[14],e[12]=a,e[13]=i,e[14]=u}else e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=n[1],e[5]=n[5],e[6]=n[9],e[7]=n[13],e[8]=n[2],e[9]=n[6],e[10]=n[10],e[11]=n[14],e[12]=n[3],e[13]=n[7],e[14]=n[11],e[15]=n[15];return e},f.invert=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],d=n[10],p=n[11],v=n[12],h=n[13],m=n[14],g=n[15],y=t*u-r*i,_=t*c-a*i,x=t*s-o*i,w=r*c-a*u,b=r*s-o*u,P=a*s-o*c,M=f*h-l*v,z=f*m-d*v,T=f*g-p*v,E=l*m-d*h,A=l*g-p*h,S=d*g-p*m,R=y*S-_*A+x*E+w*T-b*z+P*M;return R?(R=1/R,e[0]=(u*S-c*A+s*E)*R,e[1]=(a*A-r*S-o*E)*R,e[2]=(h*P-m*b+g*w)*R,e[3]=(d*b-l*P-p*w)*R,e[4]=(c*T-i*S-s*z)*R,e[5]=(t*S-a*T+o*z)*R,e[6]=(m*x-v*P-g*_)*R,e[7]=(f*P-d*x+p*_)*R,e[8]=(i*A-u*T+s*M)*R,e[9]=(r*T-t*A-o*M)*R,e[10]=(v*b-h*x+g*y)*R,e[11]=(l*x-f*b-p*y)*R,e[12]=(u*z-i*E-c*M)*R,e[13]=(t*E-r*z+a*M)*R,e[14]=(h*_-v*w-m*y)*R,e[15]=(f*w-l*_+d*y)*R,e):null},f.adjoint=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],d=n[10],p=n[11],v=n[12],h=n[13],m=n[14],g=n[15];return e[0]=u*(d*g-p*m)-l*(c*g-s*m)+h*(c*p-s*d),e[1]=-(r*(d*g-p*m)-l*(a*g-o*m)+h*(a*p-o*d)),e[2]=r*(c*g-s*m)-u*(a*g-o*m)+h*(a*s-o*c),e[3]=-(r*(c*p-s*d)-u*(a*p-o*d)+l*(a*s-o*c)),e[4]=-(i*(d*g-p*m)-f*(c*g-s*m)+v*(c*p-s*d)),e[5]=t*(d*g-p*m)-f*(a*g-o*m)+v*(a*p-o*d),e[6]=-(t*(c*g-s*m)-i*(a*g-o*m)+v*(a*s-o*c)),e[7]=t*(c*p-s*d)-i*(a*p-o*d)+f*(a*s-o*c),e[8]=i*(l*g-p*h)-f*(u*g-s*h)+v*(u*p-s*l),e[9]=-(t*(l*g-p*h)-f*(r*g-o*h)+v*(r*p-o*l)),e[10]=t*(u*g-s*h)-i*(r*g-o*h)+v*(r*s-o*u),e[11]=-(t*(u*p-s*l)-i*(r*p-o*l)+f*(r*s-o*u)),e[12]=-(i*(l*m-d*h)-f*(u*m-c*h)+v*(u*d-c*l)),e[13]=t*(l*m-d*h)-f*(r*m-a*h)+v*(r*d-a*l),e[14]=-(t*(u*m-c*h)-i*(r*m-a*h)+v*(r*c-a*u)),e[15]=t*(u*d-c*l)-i*(r*d-a*l)+f*(r*c-a*u),e},f.determinant=function(e){var n=e[0],t=e[1],r=e[2],a=e[3],o=e[4],i=e[5],u=e[6],c=e[7],s=e[8],f=e[9],l=e[10],d=e[11],p=e[12],v=e[13],h=e[14],m=e[15],g=n*i-t*o,y=n*u-r*o,_=n*c-a*o,x=t*u-r*i,w=t*c-a*i,b=r*c-a*u,P=s*v-f*p,M=s*h-l*p,z=s*m-d*p,T=f*h-l*v,E=f*m-d*v,A=l*m-d*h;return g*A-y*E+_*T+x*z-w*M+b*P},f.multiply=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],d=n[9],p=n[10],v=n[11],h=n[12],m=n[13],g=n[14],y=n[15],_=t[0],x=t[1],w=t[2],b=t[3];return e[0]=_*r+x*u+w*l+b*h,e[1]=_*a+x*c+w*d+b*m,e[2]=_*o+x*s+w*p+b*g,e[3]=_*i+x*f+w*v+b*y,_=t[4],x=t[5],w=t[6],b=t[7],e[4]=_*r+x*u+w*l+b*h,e[5]=_*a+x*c+w*d+b*m,e[6]=_*o+x*s+w*p+b*g,e[7]=_*i+x*f+w*v+b*y,_=t[8],x=t[9],w=t[10],b=t[11],e[8]=_*r+x*u+w*l+b*h,e[9]=_*a+x*c+w*d+b*m,e[10]=_*o+x*s+w*p+b*g,e[11]=_*i+x*f+w*v+b*y,_=t[12],x=t[13],w=t[14],b=t[15],e[12]=_*r+x*u+w*l+b*h,e[13]=_*a+x*c+w*d+b*m,e[14]=_*o+x*s+w*p+b*g,e[15]=_*i+x*f+w*v+b*y,e},f.mul=f.multiply,f.translate=function(e,n,t){var r,a,o,i,u,c,s,f,l,d,p,v,h=t[0],m=t[1],g=t[2];return n===e?(e[12]=n[0]*h+n[4]*m+n[8]*g+n[12],e[13]=n[1]*h+n[5]*m+n[9]*g+n[13],e[14]=n[2]*h+n[6]*m+n[10]*g+n[14],e[15]=n[3]*h+n[7]*m+n[11]*g+n[15]):(r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],d=n[9],p=n[10],v=n[11],e[0]=r,e[1]=a,e[2]=o,e[3]=i,e[4]=u,e[5]=c,e[6]=s,e[7]=f,e[8]=l,e[9]=d,e[10]=p,e[11]=v,e[12]=r*h+u*m+l*g+n[12],e[13]=a*h+c*m+d*g+n[13],e[14]=o*h+s*m+p*g+n[14],e[15]=i*h+f*m+v*g+n[15]),e},f.scale=function(e,n,t){var r=t[0],a=t[1],o=t[2];return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e[4]=n[4]*a,e[5]=n[5]*a,e[6]=n[6]*a,e[7]=n[7]*a,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=n[11]*o,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},f.rotate=function(e,t,r,a){var o,i,u,c,s,f,l,d,p,v,h,m,g,y,_,x,w,b,P,M,z,T,E,A,S=a[0],R=a[1],N=a[2],I=Math.sqrt(S*S+R*R+N*N);return Math.abs(I)<n?null:(I=1/I,S*=I,R*=I,N*=I,o=Math.sin(r),i=Math.cos(r),u=1-i,c=t[0],s=t[1],f=t[2],l=t[3],d=t[4],p=t[5],v=t[6],h=t[7],m=t[8],g=t[9],y=t[10],_=t[11],x=S*S*u+i,w=R*S*u+N*o,b=N*S*u-R*o,P=S*R*u-N*o,M=R*R*u+i,z=N*R*u+S*o,T=S*N*u+R*o,E=R*N*u-S*o,A=N*N*u+i,e[0]=c*x+d*w+m*b,e[1]=s*x+p*w+g*b,e[2]=f*x+v*w+y*b,e[3]=l*x+h*w+_*b,e[4]=c*P+d*M+m*z,e[5]=s*P+p*M+g*z,e[6]=f*P+v*M+y*z,e[7]=l*P+h*M+_*z,e[8]=c*T+d*E+m*A,e[9]=s*T+p*E+g*A,e[10]=f*T+v*E+y*A,e[11]=l*T+h*E+_*A,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},f.rotateX=function(e,n,t){var r=Math.sin(t),a=Math.cos(t),o=n[4],i=n[5],u=n[6],c=n[7],s=n[8],f=n[9],l=n[10],d=n[11];return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[4]=o*a+s*r,e[5]=i*a+f*r,e[6]=u*a+l*r,e[7]=c*a+d*r,e[8]=s*a-o*r,e[9]=f*a-i*r,e[10]=l*a-u*r,e[11]=d*a-c*r,e},f.rotateY=function(e,n,t){var r=Math.sin(t),a=Math.cos(t),o=n[0],i=n[1],u=n[2],c=n[3],s=n[8],f=n[9],l=n[10],d=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=o*a-s*r,e[1]=i*a-f*r,e[2]=u*a-l*r,e[3]=c*a-d*r,e[8]=o*r+s*a,e[9]=i*r+f*a,e[10]=u*r+l*a,e[11]=c*r+d*a,e},f.rotateZ=function(e,n,t){var r=Math.sin(t),a=Math.cos(t),o=n[0],i=n[1],u=n[2],c=n[3],s=n[4],f=n[5],l=n[6],d=n[7];return n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=o*a+s*r,e[1]=i*a+f*r,e[2]=u*a+l*r,e[3]=c*a+d*r,e[4]=s*a-o*r,e[5]=f*a-i*r,e[6]=l*a-u*r,e[7]=d*a-c*r,e},f.fromRotationTranslation=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=r+r,c=a+a,s=o+o,f=r*u,l=r*c,d=r*s,p=a*c,v=a*s,h=o*s,m=i*u,g=i*c,y=i*s;return e[0]=1-(p+h),e[1]=l+y,e[2]=d-g,e[3]=0,e[4]=l-y,e[5]=1-(f+h),e[6]=v+m,e[7]=0,e[8]=d+g,e[9]=v-m,e[10]=1-(f+p),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},f.fromQuat=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=t+t,u=r+r,c=a+a,s=t*i,f=t*u,l=t*c,d=r*u,p=r*c,v=a*c,h=o*i,m=o*u,g=o*c;return e[0]=1-(d+v),e[1]=f+g,e[2]=l-m,e[3]=0,e[4]=f-g,e[5]=1-(s+v),e[6]=p+h,e[7]=0,e[8]=l+m,e[9]=p-h,e[10]=1-(s+d),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},f.frustum=function(e,n,t,r,a,o,i){var u=1/(t-n),c=1/(a-r),s=1/(o-i);return e[0]=2*o*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*c,e[6]=0,e[7]=0,e[8]=(t+n)*u,e[9]=(a+r)*c,e[10]=(i+o)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*o*2*s,e[15]=0,e},f.perspective=function(e,n,t,r,a){var o=1/Math.tan(n/2),i=1/(r-a);return e[0]=o/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+r)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*r*i,e[15]=0,e},f.ortho=function(e,n,t,r,a,o,i){var u=1/(n-t),c=1/(r-a),s=1/(o-i);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*s,e[11]=0,e[12]=(n+t)*u,e[13]=(a+r)*c,e[14]=(i+o)*s,e[15]=1,e},f.lookAt=function(e,t,r,a){var o,i,u,c,s,l,d,p,v,h,m=t[0],g=t[1],y=t[2],_=a[0],x=a[1],w=a[2],b=r[0],P=r[1],M=r[2];return Math.abs(m-b)<n&&Math.abs(g-P)<n&&Math.abs(y-M)<n?f.identity(e):(d=m-b,p=g-P,v=y-M,h=1/Math.sqrt(d*d+p*p+v*v),d*=h,p*=h,v*=h,o=x*v-w*p,i=w*d-_*v,u=_*p-x*d,h=Math.sqrt(o*o+i*i+u*u),h?(h=1/h,o*=h,i*=h,u*=h):(o=0,i=0,u=0),c=p*u-v*i,s=v*o-d*u,l=d*i-p*o,h=Math.sqrt(c*c+s*s+l*l),h?(h=1/h,c*=h,s*=h,l*=h):(c=0,s=0,l=0),e[0]=o,e[1]=c,e[2]=d,e[3]=0,e[4]=i,e[5]=s,e[6]=p,e[7]=0,e[8]=u,e[9]=l,e[10]=v,e[11]=0,e[12]=-(o*m+i*g+u*y),e[13]=-(c*m+s*g+l*y),e[14]=-(d*m+p*g+v*y),e[15]=1,e)},f.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},"undefined"!=typeof e&&(e.mat4=f);{var l={};new Float32Array([0,0,0,1])}l.create=function(){var e=new t(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},l.clone=i.clone,l.fromValues=i.fromValues,l.copy=i.copy,l.set=i.set,l.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},l.setAxisAngle=function(e,n,t){t=.5*t;var r=Math.sin(t);return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=Math.cos(t),e},l.add=i.add,l.multiply=function(e,n,t){var r=n[0],a=n[1],o=n[2],i=n[3],u=t[0],c=t[1],s=t[2],f=t[3];return e[0]=r*f+i*u+a*s-o*c,e[1]=a*f+i*c+o*u-r*s,e[2]=o*f+i*s+r*c-a*u,e[3]=i*f-r*u-a*c-o*s,e},l.mul=l.multiply,l.scale=i.scale,l.rotateX=function(e,n,t){t*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(t),c=Math.cos(t);return e[0]=r*c+i*u,e[1]=a*c+o*u,e[2]=o*c-a*u,e[3]=i*c-r*u,e},l.rotateY=function(e,n,t){t*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(t),c=Math.cos(t);return e[0]=r*c-o*u,e[1]=a*c+i*u,e[2]=o*c+r*u,e[3]=i*c-a*u,e},l.rotateZ=function(e,n,t){t*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(t),c=Math.cos(t);return e[0]=r*c+a*u,e[1]=a*c-r*u,e[2]=o*c+i*u,e[3]=i*c-o*u,e},l.calculateW=function(e,n){var t=n[0],r=n[1],a=n[2];return e[0]=t,e[1]=r,e[2]=a,e[3]=-Math.sqrt(Math.abs(1-t*t-r*r-a*a)),e},l.dot=i.dot,l.lerp=i.lerp,l.slerp=function(e,n,t,r){var a,o,i,u,c=n[0],s=n[1],f=n[2],l=n[3],d=t[0],p=t[1],v=t[2],h=t[3],m=c*d+s*p+f*v+l*h;return Math.abs(m)>=1?(e!==n&&(e[0]=c,e[1]=s,e[2]=f,e[3]=l),e):(a=Math.acos(m),o=Math.sqrt(1-m*m),Math.abs(o)<.001?(e[0]=.5*c+.5*d,e[1]=.5*s+.5*p,e[2]=.5*f+.5*v,e[3]=.5*l+.5*h,e):(i=Math.sin((1-r)*a)/o,u=Math.sin(r*a)/o,e[0]=c*i+d*u,e[1]=s*i+p*u,e[2]=f*i+v*u,e[3]=l*i+h*u,e))},l.invert=function(e,n){var t=n[0],r=n[1],a=n[2],o=n[3],i=t*t+r*r+a*a+o*o,u=i?1/i:0;return e[0]=-t*u,e[1]=-r*u,e[2]=-a*u,e[3]=o*u,e},l.conjugate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=n[3],e},l.length=i.length,l.len=l.length,l.squaredLength=i.squaredLength,l.sqrLen=l.squaredLength,l.normalize=i.normalize,l.fromMat3=function(){var e=[1,2,0];return function(n,t){var r,a=t[0]+t[4]+t[8];if(a>0)r=Math.sqrt(a+1),n[3]=.5*r,r=.5/r,n[0]=(t[7]-t[5])*r,n[1]=(t[2]-t[6])*r,n[2]=(t[3]-t[1])*r;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var i=e[o],u=e[i];r=Math.sqrt(t[3*o+o]-t[3*i+i]-t[3*u+u]+1),n[o]=.5*r,r=.5/r,n[3]=(t[3*u+i]-t[3*i+u])*r,n[i]=(t[3*i+o]+t[3*o+i])*r,n[u]=(t[3*u+o]+t[3*o+u])*r}return n}}(),l.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.quat=l)}(e.exports)}()},{}],2:[function(e,n,t){!function(){var e={},n=null,r=!0,a=!1;try{"undefined"!=typeof AudioContext?n=new AudioContext:"undefined"!=typeof webkitAudioContext?n=new webkitAudioContext:r=!1}catch(o){r=!1}if(!r)if("undefined"!=typeof Audio)try{new Audio}catch(o){a=!0}else a=!0;if(r){var i="undefined"==typeof n.createGain?n.createGainNode():n.createGain();i.gain.value=1,i.connect(n.destination)}var u=function(e){this._volume=1,this._muted=!1,this.usingWebAudio=r,this.ctx=n,this.noAudio=a,this._howls=[],this._codecs=e,this.iOSAutoEnable=!0};u.prototype={volume:function(e){var n=this;if(e=parseFloat(e),e>=0&&1>=e){n._volume=e,r&&(i.gain.value=e);for(var t in n._howls)if(n._howls.hasOwnProperty(t)&&n._howls[t]._webAudio===!1)for(var a=0;a<n._howls[t]._audioNode.length;a++)n._howls[t]._audioNode[a].volume=n._howls[t]._volume*n._volume;return n}return r?i.gain.value:n._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){var n=this;n._muted=e,r&&(i.gain.value=e?0:n._volume);for(var t in n._howls)if(n._howls.hasOwnProperty(t)&&n._howls[t]._webAudio===!1)for(var a=0;a<n._howls[t]._audioNode.length;a++)n._howls[t]._audioNode[a].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(!n||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var t=function(){var r=n.createBuffer(1,1,22050),a=n.createBufferSource();a.buffer=r,a.connect(n.destination),"undefined"==typeof a.start?a.noteOn(0):a.start(0),setTimeout(function(){(a.playbackState===a.PLAYING_STATE||a.playbackState===a.FINISHED_STATE)&&(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchstart",t,!1))},0)};return window.addEventListener("touchstart",t,!1),e}}};var c=null,s={};a||(c=new Audio,s={mp3:!!c.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!c.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var f=new u(s),l=function(e){var t=this;t._autoplay=e.autoplay||!1,t._buffer=e.buffer||!1,t._duration=e.duration||0,t._format=e.format||null,t._loop=e.loop||!1,t._loaded=!1,t._sprite=e.sprite||{},t._src=e.src||"",t._pos3d=e.pos3d||[0,0,-.5],t._volume=void 0!==e.volume?e.volume:1,t._urls=e.urls||[],t._rate=e.rate||1,t._model=e.model||null,t._onload=[e.onload||function(){}],t._onloaderror=[e.onloaderror||function(){}],t._onend=[e.onend||function(){}],t._onpause=[e.onpause||function(){}],t._onplay=[e.onplay||function(){}],t._onendTimer=[],t._webAudio=r&&!t._buffer,t._audioNode=[],t._webAudio&&t._setupAudioNode(),"undefined"!=typeof n&&n&&f.iOSAutoEnable&&f._enableiOSAudio(),f._howls.push(t),t.load()};if(l.prototype={load:function(){var e=this,n=null;if(a)return void e.on("loaderror");for(var t=0;t<e._urls.length;t++){var r,o;if(e._format)r=e._format;else{if(o=e._urls[t],r=/^data:audio\/([^;,]+);/i.exec(o),r||(r=/\.([^.]+)$/.exec(o.split("?",1)[0])),!r)return void e.on("loaderror");r=r[1].toLowerCase()}if(s[r]){n=e._urls[t];break}}if(!n)return void e.on("loaderror");if(e._src=n,e._webAudio)d(e,n);else{var i=new Audio;i.addEventListener("error",function(){i.error&&4===i.error.code&&(u.noAudio=!0),e.on("loaderror",{type:i.error?i.error.code:0})},!1),e._audioNode.push(i),i.src=n,i._pos=0,i.preload="auto",i.volume=f._muted?0:e._volume*f.volume();var c=function(){e._duration=Math.ceil(10*i.duration)/10,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play(),i.removeEventListener("canplaythrough",c,!1)};i.addEventListener("canplaythrough",c,!1),i.load()}return e},urls:function(e){var n=this;return e?(n.stop(),n._urls="string"==typeof e?[e]:e,n._loaded=!1,n.load(),n):n._urls},play:function(e,t){var r=this;return"function"==typeof e&&(t=e),e&&"function"!=typeof e||(e="_default"),r._loaded?r._sprite[e]?(r._inactiveNode(function(a){a._sprite=e;var o=a._pos>0?a._pos:r._sprite[e][0]/1e3,i=0;r._webAudio?(i=r._sprite[e][1]/1e3-a._pos,a._pos>0&&(o=r._sprite[e][0]/1e3+o)):i=r._sprite[e][1]/1e3-(o-r._sprite[e][0]/1e3);var u,c=!(!r._loop&&!r._sprite[e][2]),s="string"==typeof t?t:Math.round(Date.now()*Math.random())+"";if(function(){var n={id:s,sprite:e,loop:c};u=setTimeout(function(){!r._webAudio&&c&&r.stop(n.id).play(e,n.id),r._webAudio&&!c&&(r._nodeById(n.id).paused=!0,r._nodeById(n.id)._pos=0,r._clearEndTimer(n.id)),r._webAudio||c||r.stop(n.id),r.on("end",s)},1e3*i),r._onendTimer.push({timer:u,id:n.id})}(),r._webAudio){var l=r._sprite[e][0]/1e3,d=r._sprite[e][1]/1e3;a.id=s,a.paused=!1,h(r,[c,l,d],s),r._playStart=n.currentTime,a.gain.value=r._volume,"undefined"==typeof a.bufferSource.start?a.bufferSource.noteGrainOn(0,o,i):a.bufferSource.start(0,o,i)}else{if(4!==a.readyState&&(a.readyState||!navigator.isCocoonJS))return r._clearEndTimer(s),function(){var n=r,o=e,i=t,u=a,c=function(){n.play(o,i),u.removeEventListener("canplaythrough",c,!1)};u.addEventListener("canplaythrough",c,!1)}(),r;a.readyState=4,a.id=s,a.currentTime=o,a.muted=f._muted||a.muted,a.volume=r._volume*f.volume(),setTimeout(function(){a.play()},0)}return r.on("play"),"function"==typeof t&&t(s),r}),r):("function"==typeof t&&t(),r):(r.on("load",function(){r.play(e,t)}),r)},pause:function(e){var n=this;if(!n._loaded)return n.on("play",function(){n.pause(e)}),n;n._clearEndTimer(e);var t=e?n._nodeById(e):n._activeNode();if(t)if(t._pos=n.pos(null,e),n._webAudio){if(!t.bufferSource||t.paused)return n;t.paused=!0,"undefined"==typeof t.bufferSource.stop?t.bufferSource.noteOff(0):t.bufferSource.stop(0)}else t.pause();return n.on("pause"),n},stop:function(e){var n=this;if(!n._loaded)return n.on("play",function(){n.stop(e)}),n;n._clearEndTimer(e);var t=e?n._nodeById(e):n._activeNode();if(t)if(t._pos=0,n._webAudio){if(!t.bufferSource||t.paused)return n;t.paused=!0,"undefined"==typeof t.bufferSource.stop?t.bufferSource.noteOff(0):t.bufferSource.stop(0)}else isNaN(t.duration)||(t.pause(),t.currentTime=0);return n},mute:function(e){var n=this;if(!n._loaded)return n.on("play",function(){n.mute(e)}),n;var t=e?n._nodeById(e):n._activeNode();return t&&(n._webAudio?t.gain.value=0:t.muted=!0),n},unmute:function(e){var n=this;if(!n._loaded)return n.on("play",function(){n.unmute(e)}),n;var t=e?n._nodeById(e):n._activeNode();return t&&(n._webAudio?t.gain.value=n._volume:t.muted=!1),n},volume:function(e,n){var t=this;if(e=parseFloat(e),e>=0&&1>=e){if(t._volume=e,!t._loaded)return t.on("play",function(){t.volume(e,n)}),t;var r=n?t._nodeById(n):t._activeNode();return r&&(t._webAudio?r.gain.value=e:r.volume=e*f.volume()),t}return t._volume},loop:function(e){var n=this;return"boolean"==typeof e?(n._loop=e,n):n._loop},sprite:function(e){var n=this;return"object"==typeof e?(n._sprite=e,n):n._sprite},pos:function(e,t){var r=this;if(!r._loaded)return r.on("load",function(){r.pos(e)}),"number"==typeof e?r:r._pos||0;e=parseFloat(e);
var a=t?r._nodeById(t):r._activeNode();if(a)return e>=0?(r.pause(t),a._pos=e,r.play(a._sprite,t),r):r._webAudio?a._pos+(n.currentTime-r._playStart):a.currentTime;if(e>=0)return r;for(var o=0;o<r._audioNode.length;o++)if(r._audioNode[o].paused&&4===r._audioNode[o].readyState)return r._webAudio?r._audioNode[o]._pos:r._audioNode[o].currentTime},pos3d:function(e,n,t,r){var a=this;if(n="undefined"!=typeof n&&n?n:0,t="undefined"!=typeof t&&t?t:-.5,!a._loaded)return a.on("play",function(){a.pos3d(e,n,t,r)}),a;if(!(e>=0||0>e))return a._pos3d;if(a._webAudio){var o=r?a._nodeById(r):a._activeNode();o&&(a._pos3d=[e,n,t],o.panner.setPosition(e,n,t),o.panner.panningModel=a._model||"HRTF")}return a},fade:function(e,n,t,r,a){var o=this,i=Math.abs(e-n),u=e>n?"down":"up",c=i/.01,s=t/c;if(!o._loaded)return o.on("load",function(){o.fade(e,n,t,r,a)}),o;o.volume(e,a);for(var f=1;c>=f;f++)!function(){var e=o._volume+("up"===u?.01:-.01)*f,t=Math.round(1e3*e)/1e3,i=n;setTimeout(function(){o.volume(t,a),t===i&&r&&r()},s*f)}()},fadeIn:function(e,n,t){return this.volume(0).play().fade(0,e,n,t)},fadeOut:function(e,n,t,r){var a=this;return a.fade(a._volume,e,n,function(){t&&t(),a.pause(r),a.on("end")},r)},_nodeById:function(e){for(var n=this,t=n._audioNode[0],r=0;r<n._audioNode.length;r++)if(n._audioNode[r].id===e){t=n._audioNode[r];break}return t},_activeNode:function(){for(var e=this,n=null,t=0;t<e._audioNode.length;t++)if(!e._audioNode[t].paused){n=e._audioNode[t];break}return e._drainPool(),n},_inactiveNode:function(e){for(var n=this,t=null,r=0;r<n._audioNode.length;r++)if(n._audioNode[r].paused&&4===n._audioNode[r].readyState){e(n._audioNode[r]),t=!0;break}if(n._drainPool(),!t){var a;if(n._webAudio)a=n._setupAudioNode(),e(a);else{n.load(),a=n._audioNode[n._audioNode.length-1];var o=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",i=function(){a.removeEventListener(o,i,!1),e(a)};a.addEventListener(o,i,!1)}}},_drainPool:function(){var e,n=this,t=0;for(e=0;e<n._audioNode.length;e++)n._audioNode[e].paused&&t++;for(e=n._audioNode.length-1;e>=0&&!(5>=t);e--)n._audioNode[e].paused&&(n._webAudio&&n._audioNode[e].disconnect(0),t--,n._audioNode.splice(e,1))},_clearEndTimer:function(e){for(var n=this,t=0,r=0;r<n._onendTimer.length;r++)if(n._onendTimer[r].id===e){t=r;break}var a=n._onendTimer[t];a&&(clearTimeout(a.timer),n._onendTimer.splice(t,1))},_setupAudioNode:function(){var e=this,t=e._audioNode,r=e._audioNode.length;return t[r]="undefined"==typeof n.createGain?n.createGainNode():n.createGain(),t[r].gain.value=e._volume,t[r].paused=!0,t[r]._pos=0,t[r].readyState=4,t[r].connect(i),t[r].panner=n.createPanner(),t[r].panner.panningModel=e._model||"equalpower",t[r].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]),t[r].panner.connect(t[r]),t[r]},on:function(e,n){var t=this,r=t["_on"+e];if("function"==typeof n)r.push(n);else for(var a=0;a<r.length;a++)n?r[a].call(t,n):r[a].call(t);return t},off:function(e,n){var t=this,r=t["_on"+e],a=n?n.toString():null;if(a){for(var o=0;o<r.length;o++)if(a===r[o].toString()){r.splice(o,1);break}}else t["_on"+e]=[];return t},unload:function(){for(var n=this,t=n._audioNode,r=0;r<n._audioNode.length;r++)t[r].paused||(n.stop(t[r].id),n.on("end",t[r].id)),n._webAudio?t[r].disconnect(0):t[r].src="";for(r=0;r<n._onendTimer.length;r++)clearTimeout(n._onendTimer[r].timer);var a=f._howls.indexOf(n);null!==a&&a>=0&&f._howls.splice(a,1),delete e[n._src],n=null}},r)var d=function(n,t){if(t in e)return n._duration=e[t].duration,void v(n);if(/^data:[^;]+;base64,/.test(t)){for(var r=atob(t.split(",")[1]),a=new Uint8Array(r.length),o=0;o<r.length;++o)a[o]=r.charCodeAt(o);p(a.buffer,n,t)}else{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){p(i.response,n,t)},i.onerror=function(){n._webAudio&&(n._buffer=!0,n._webAudio=!1,n._audioNode=[],delete n._gainNode,delete e[t],n.load())};try{i.send()}catch(u){i.onerror()}}},p=function(t,r,a){n.decodeAudioData(t,function(n){n&&(e[a]=n,v(r,n))},function(){r.on("loaderror")})},v=function(e,n){e._duration=n?n.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},h=function(t,r,a){var o=t._nodeById(a);o.bufferSource=n.createBufferSource(),o.bufferSource.buffer=e[t._src],o.bufferSource.connect(o.panner),o.bufferSource.loop=r[0],r[0]&&(o.bufferSource.loopStart=r[1],o.bufferSource.loopEnd=r[1]+r[2]),o.bufferSource.playbackRate.value=t._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:f,Howl:l}}),"undefined"!=typeof t&&(t.Howler=f,t.Howl=l),"undefined"!=typeof window&&(window.Howler=f,window.Howl=l)}()},{}],3:[function(e,n){n.exports=SimplexNoise=function(e){void 0==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[];for(var n=0;256>n;n++)this.p[n]=Math.floor(256*e.random());this.perm=[];for(var n=0;512>n;n++)this.perm[n]=this.p[255&n];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]},SimplexNoise.prototype.dot=function(e,n,t){return e[0]*n+e[1]*t},SimplexNoise.prototype.noise=function(e,n){var t,r,a,o,i,u=.5*(Math.sqrt(3)-1),c=(e+n)*u,s=Math.floor(e+c),f=Math.floor(n+c),l=(3-Math.sqrt(3))/6,d=(s+f)*l,p=s-d,v=f-d,h=e-p,m=n-v;h>m?(o=1,i=0):(o=0,i=1);var g=h-o+l,y=m-i+l,_=h-1+2*l,x=m-1+2*l,w=255&s,b=255&f,P=this.perm[w+this.perm[b]]%12,M=this.perm[w+o+this.perm[b+i]]%12,z=this.perm[w+1+this.perm[b+1]]%12,T=.5-h*h-m*m;0>T?t=0:(T*=T,t=T*T*this.dot(this.grad3[P],h,m));var E=.5-g*g-y*y;0>E?r=0:(E*=E,r=E*E*this.dot(this.grad3[M],g,y));var A=.5-_*_-x*x;return 0>A?a=0:(A*=A,a=A*A*this.dot(this.grad3[z],_,x)),70*(t+r+a)},SimplexNoise.prototype.noise3d=function(e,n,t){var r,a,o,i,u,c,s,f,l,d,p=1/3,v=(e+n+t)*p,h=Math.floor(e+v),m=Math.floor(n+v),g=Math.floor(t+v),y=1/6,_=(h+m+g)*y,x=h-_,w=m-_,b=g-_,P=e-x,M=n-w,z=t-b;P>=M?M>=z?(u=1,c=0,s=0,f=1,l=1,d=0):P>=z?(u=1,c=0,s=0,f=1,l=0,d=1):(u=0,c=0,s=1,f=1,l=0,d=1):z>M?(u=0,c=0,s=1,f=0,l=1,d=1):z>P?(u=0,c=1,s=0,f=0,l=1,d=1):(u=0,c=1,s=0,f=1,l=1,d=0);var T=P-u+y,E=M-c+y,A=z-s+y,S=P-f+2*y,R=M-l+2*y,N=z-d+2*y,I=P-1+3*y,U=M-1+3*y,F=z-1+3*y,L=255&h,k=255&m,D=255&g,q=this.perm[L+this.perm[k+this.perm[D]]]%12,C=this.perm[L+u+this.perm[k+c+this.perm[D+s]]]%12,B=this.perm[L+f+this.perm[k+l+this.perm[D+d]]]%12,V=this.perm[L+1+this.perm[k+1+this.perm[D+1]]]%12,O=.6-P*P-M*M-z*z;0>O?r=0:(O*=O,r=O*O*this.dot(this.grad3[q],P,M,z));var X=.6-T*T-E*E-A*A;0>X?a=0:(X*=X,a=X*X*this.dot(this.grad3[C],T,E,A));var j=.6-S*S-R*R-N*N;0>j?o=0:(j*=j,o=j*j*this.dot(this.grad3[B],S,R,N));var G=.6-I*I-U*U-F*F;return 0>G?i=0:(G*=G,i=G*G*this.dot(this.grad3[V],I,U,F)),32*(r+a+o+i)}},{}],4:[function(e,n){!function(){function t(e){r.call(this),this._index=0,this._state=new Array(624),this._state[0]=null!=e?e:4294967295*Math.random()|0,this._seed=this._state[0];var n,t=this._state;for(n=1;624>n;n++)t[n]=t[n-1]^t[n-1]>>>30,t[n]=1812433253*t[n]+n,t[n]=t[n]&(t[n]<<32)-1}var r;if("undefined"!=typeof n){if(n.exports=t,"function"==typeof e)var r=e("../")}else r=this.Random,r.MT=t;var a=t.prototype=Object.create(r.prototype);a.constructor=t,a._generateNumbers=function(){var e,n,t=this._state;for(e=0;624>e;e++)n=2147483648&t[e],n+=2147483647&t[(e+1)%624],t[e]=t[(e+397)%624]^n>>>1,n%2!==0&&(t[e]=2567483615^t[e])},a.uniform=function(){0===this._index&&this._generateNumbers();var e=this._state[this._index];return e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>>18,this._index=(this._index+1)%624,(e>>>0)*(1/4294967296)}}()},{"../":7}],5:[function(e,n){!function(){function t(e){r.call(this),this._seed=null!=e?e:1}var r;if("undefined"!=typeof n){if(n.exports=t,"function"==typeof e)var r=e("../")}else r=this.Random,r.PM=t;var a=t.prototype=Object.create(r.prototype);a.constructor=t,a.uniform=function(){var e=16807*(this._seed>>16),n=16807*(65535&this._seed)+((32767&e)<<16)+(e>>15);return this._seed=n>2147483647?n-2147483647:n,this._seed/2147483647}}()},{"../":7}],6:[function(e,n){!function(){function t(e,n,t,a){r.call(this),this.x=null!=e?e:this.x,this.y=null!=n?n:this.y,this.z=null!=t?t:this.z,this.w=null!=a?a:this.w}var r;if("undefined"!=typeof n){if(n.exports=t,"function"==typeof e)var r=e("../")}else r=this.Random,r.XOR=t;var a=t.prototype=Object.create(r.prototype);a.constructor=t,a.x=123456789,a.y=362436069,a.z=521288629,a.w=88675123,a.uniform=function(){var e=this.x^this.x<<11;return this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>19^(e^e>>8),this.w/2147483647}}()},{"../":7}],7:[function(e,n){function t(){this._normal=null}t.prototype={constructor:t,get seed(){return this._seed},set seed(e){this.constructor.call(this,e)},next:function(){return 0|255*this.uniform()},random:function(){return this.uniform()},uniform:function(){return Math.random()},normal:function(){var e,n;if(null!=this._normal){var t=this._normal;return this._normal=null,t}return e=this.uniform()||Math.pow(2,-53),e=Math.sqrt(-2*Math.log(e)),n=2*Math.PI*this.uniform(),this._normal=e*Math.sin(n),e*Math.cos(n)},range:function(e,n){return null==e?this.uniform():(null==n&&(n=e,e=0),e+Math.floor(this.uniform()*(n-e)))},exp:function(){return-Math.log(this.uniform()||Math.pow(2,-53))},poisson:function(e){for(var n=Math.exp(-(e||1)),t=0,r=1;r>n;)r*=this.uniform(),t++;return t-1},gamma:function(e){var n,t,r,a,o;for(n=(1>e?1+e:e)-1/3,t=1/Math.sqrt(9*n);;){for(;;)if(r=this.normal(),o=Math.pow(1+t*r,3),o>0)break;if(a=this.uniform(),a>=1-.331*Math.pow(r,4)&&Math.log(a)>=.5*Math.pow(r,2)+n*(1-o+Math.log(o)))break}return e>1?n*o:n*o*Math.exp(this.exp()/-e)}},"undefined"!=typeof n&&(n.exports=t,"function"==typeof e&&(t.MT=e("./lib/mersenne-twister"),t.PM=e("./lib/park-miller"),t.XOR=e("./lib/xor")))},{"./lib/mersenne-twister":4,"./lib/park-miller":5,"./lib/xor":6}],8:[function(e,n){n.exports.Buffer=function(e){var n=this;n.initialize=function(){n.buffer=e.createBuffer()},n.bind=function(){e.bindBuffer(e.ARRAY_BUFFER,n.buffer)},n.set=function(t){n.bind(),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)},n.initialize()},n.exports.Renderable=function(e,n,t,r){var a=this;a.primitiveCount=r,a.initialize=function(){},a.render=function(){n.use();for(name in t){var o=t[name].buffer,i=t[name].size;try{var u=n.attribs[name].location}catch(c){throw console.log("Could not find location for",name),c}o.bind(),e.enableVertexAttribArray(u),e.vertexAttribPointer(u,i,e.FLOAT,!1,0,0)}e.drawArrays(e.TRIANGLES,0,3*r);for(name in a.buffers)e.disableVertexAttribArray(n.attributes[name].location)},a.initialize()},n.exports.Program=function(e,n,t){var r=this;r.initialize=function(){r.program=r.compileProgram(n,t),r.attribs=r.gatherAttribs(),r.uniforms=r.gatherUniforms()},r.use=function(){e.useProgram(r.program)},r.compileProgram=function(n,t){var a=r.compileShader(n,e.VERTEX_SHADER),o=r.compileShader(t,e.FRAGMENT_SHADER),i=e.createProgram();if(e.attachShader(i,a),e.attachShader(i,o),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(i)),"Failed to compile program.";return i},r.compileShader=function(n,t){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(r),o=parseInt(a.split(":")[2]),i=n.split("\n");for(var u in i){var c=parseInt(u)+1;console.log(c+"  "+i[u]),u==o&&console.warn(a)}throw typeString=t==e.VERTEX_SHADER?"vertex":"fragment","Failed to compile "+typeString+" shader."}return r},r.setUniform=function(n,t){var a=Array.prototype.slice.call(arguments,2);r.use();try{var o=r.uniforms[n].location}catch(i){throw console.log(n),i}e["uniform"+t].apply(e,[o].concat(a))},r.gatherUniforms=function(){for(var n={},t=e.getProgramParameter(r.program,e.ACTIVE_UNIFORMS),a=0;t>a;a++){var o=e.getActiveUniform(r.program,a);n[o.name]={name:o.name,location:e.getUniformLocation(r.program,o.name),type:o.type,size:o.size}}return n},r.gatherAttribs=function(){for(var n={},t=e.getProgramParameter(r.program,e.ACTIVE_ATTRIBUTES),a=0;t>a;a++){var o=e.getActiveAttrib(r.program,a);n[o.name]={name:o.name,location:e.getAttribLocation(r.program,o.name),type:o.type,size:o.size}}return n},r.initialize()}},{}],9:[function(e,n){n.exports=e("./core.js")},{"./core.js":8}],10:[function(e,n){var t=e("gl-matrix"),r=e("./surface");n.exports=function(e,n,a,o){var i=this;initialize=function(){i.reset()},i.reset=function(){i.radius=e,i.alpha=1;var n=r.height(a[0],a[1])+i.radius;i.p={x:a[0],y:n,z:a[1]},i.v={x:0,y:0,z:0}},i.update=function(){var e=r.force(i.p.x,i.p.z),n=i.customBehavior();e[0]+=n[0],e[2]+=n[2],e[0]-=2*i.v.x,e[2]-=2*i.v.z,i.v.x+=.04*e[0],i.v.z+=.04*e[2],i.p.x+=.01*i.v.x,i.p.z+=.01*i.v.z,i.p.y=r.height(i.p.x,i.p.z)+i.radius},i.customBehavior=function(){return[0,0,0]},i.render=function(e,r,a){var u=t.vec2.fromValues(a.center[0],a.center[2]),c=t.vec2.fromValues(i.p.x,i.p.z),s=Math.abs(t.vec2.distance(u,c)-a.age),f=.0125*Math.exp(100*-s);o.render([i.p.x,i.p.y+f,i.p.z],i.radius,n,i.alpha,e,r)},initialize()}},{"./surface":17,"gl-matrix":1}],11:[function(e,n){var t=32;n.exports={chunk:{width:.3,depth:.1,height:.04,scale:1/6,octaves:2,res:{width:3*t,depth:t}},lightDir:[0,1,0],board:{depth:.5},player:{radius:.005}}},{}],12:[function(e){"use strict";function n(){var e="";t()==r()&&(e+="NEW HIGH SCORE\n\n"),e+="You scored "+t()+" points.\n\n",e+=D,m.purgatory.print(e),a()}function t(){return Math.round(100*-q)}function r(){return localStorage.getItem("highScore")||0}function a(){q=0,_.age=1e3,v.reset(),h.reset(),k.state="waiting"}function o(){var e=Math.min(1,_.age);return e*e*e}function i(e,n,t,r){var a=[0+n[0],.3+n[1],q+.6+n[2]];document.webkitFullscreenElement&&y.capable&&y.initialized&&(a[1]+=.1,a[2]-=.1);var t=T.vec3.add(T.vec3.create(),t,a),o=T.mat4.lookAt(T.mat4.create(),a,t,r);if(c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),l.update(q),l.render(q,v,h,o,e,_),g(a,o,e),"running"===k.state||"dying"===k.state){var i=T.mat4.create();T.mat4.translate(i,i,[-U.chunk.width,0,q-U.board.depth/2]),T.mat4.rotateX(i,i,-Math.PI/4),m.score.render(i,o,e,1/1024);var i=T.mat4.create();T.mat4.translate(i,i,[-U.chunk.width,0,q-U.board.depth/99999]),T.mat4.rotateX(i,i,-Math.PI/4),m.pulseReady.render(i,o,e,1/1024)}var i=T.mat4.create();if(T.mat4.translate(i,i,[+U.chunk.width,0,q-U.board.depth/2]),T.mat4.rotateX(i,i,-Math.PI/4),m.highScore.render(i,o,e,1/1024),"waiting"===k.state){var i=T.mat4.create();T.mat4.translate(i,i,[0,.1,U.board.depth/4]),T.mat4.rotateX(i,i,-Math.PI/4),m.purgatory.render(i,o,e,1/4500)}v.render(o,e,_),h.render(o,e,_)}function u(){if("running"===k.state){_.age+=.01,q-=.002*o(),h.update(),v.update();var e=t(),a=r();a=Math.max(e,a),localStorage.setItem("highScore",a),m.score.print("Your Score\n"+e.toString());var f=Math.round(100*Math.min(1,_.age/L));100===f?(m.pulseReady.setOptions(32,"Monospace","#0FF","center","rgba(0,0,0,0)"),m.pulseReady.print("Tachyon\nPulse\nReady")):(m.pulseReady.setOptions(32,"Monospace","#FFF","center","rgba(0,0,0,0)"),m.pulseReady.print("Tachyon\nPulse\n"+f+"%")),(v.p.x>U.chunk.width/2||v.p.x<-U.chunk.width/2)&&(k.state="dying",P.play()),(v.p.z>U.board.depth/2+q||v.p.z<-U.board.depth/2+q)&&(k.state="dying",P.play()),h.p.x>U.chunk.width/2&&(h.p.x-=U.chunk.width,M.play()),h.p.x<-U.chunk.width/2&&(h.p.x+=U.chunk.width,M.play()),h.p.z>U.board.depth/2+q&&(h.p.z-=U.board.depth,M.play()),h.p.z<-U.board.depth/2+q&&(h.p.z+=U.board.depth,M.play())}if("dying"===k.state&&(v.radius+=.01,v.alpha*=.8,v.radius>=.25&&n()),m.highScore.print("High Score\n"+r().toString()),document.webkitFullscreenElement&&y.capable&&y.initialized)y.render(i,.01,200);else{(s.width!==s.clientWidth||s.height!==s.clientHeight)&&(s.width=s.clientWidth,s.height=s.clientHeight),c.viewport(0,0,s.width,s.height);var l=[0,0,-.3],d=[0,-.3,-.225],p=T.mat4.perspective(T.mat4.create(),Math.PI/3,s.clientWidth/s.clientHeight,.01,200),g=[0,1,0];i(p,l,d,g)}requestAnimationFrame(u)}var c,s,f,l,d,p,v,h,m,g,y,_,x,w,b,P,M,z=e("howler"),T=e("gl-matrix"),E=e("webgl.js"),A=(e("./surface"),e("./surface-manager")),S=e("./sphere-renderer"),R=e("./textpanel"),N=e("./spacebox"),I=e("./character"),U=e("./constants"),F=e("./vr"),L=10,k={state:"waiting"},D="";D+="Instructions:\n\n",D+="You are the blue ball.\n",D+="The red ball will try\n",D+="to push you off the field.\nDon't let it.\n\n",D+="Use the arrow keys to move.\n",D+="Hit the spacebar to activate\n",D+="your tachyon pulse.\n\n",D+="Press space to begin.";var q=0;window.onload=function(){x=new z.Howl({urls:["static/music.ogg"],autoplay:!0,loop:!0,volume:.5}),b=new z.Howl({urls:["static/whoosh.ogg"]}),w=new z.Howl({urls:["static/dink.ogg"]}),P=new z.Howl({urls:["static/boom.ogg"]}),M=new z.Howl({urls:["static/warp.ogg"]}),s=document.getElementById("render-canvas"),s.width=window.innerWidth,s.height=window.innerHeight,c=s.getContext("webgl",{antialias:!0}),c.viewport(0,0,s.width,s.height),c.clearColor(0,0,0,1),c.enable(c.DEPTH_TEST),c.enable(c.CULL_FACE),y=new F(c,s),y.capable||(document.getElementById("help").style.display="none"),f={};var e="#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec3 aColor;\n\nuniform mat4 uView;\nuniform mat4 uProjection;\nuniform mat4 uModel;\n\nuniform vec3 uPlayerPos;\nuniform vec3 uPulseCenter;\n\nuniform float uPulseAge;\n\nvarying vec3 vPos;\nvarying vec3 vColor;\nvarying vec3 vNormal;\n\nvoid main() {\n    gl_Position = uProjection * uView * uModel * vec4(aPosition, 1.0);\n    float d = abs(distance(uPulseCenter.xz, aPosition.xz) - uPulseAge);\n    float h = exp(-d * 100.0);\n    gl_Position.y += 0.0125 * h;\n    vColor = (1.0 - h) * aColor + h * vec3(0.0, 1.0, 1.0);\n    vPos = aPosition;\n    vNormal = aNormal;\n}\n\n\n==SPLIT==\n\n\n#version 100\nprecision highp float;\n\nuniform float uBoardZ;\nuniform float uBoardDepth;\nuniform float uBoardWidth;\n\nuniform vec3 uPlayerPos;\nuniform vec3 uChaserPos;\n\nvarying vec3 vColor;\nvarying vec3 vPos;\nvarying vec3 vNormal;\n\nvoid main() {\n    float i = clamp(dot(vNormal, normalize(vec3(0,  1,  0))), 0.0, 1.0);\n    float d = 0.005;\n    vec3 red = vec3(1.0, 0.0, 0.0) * clamp(d/distance(vPos, uChaserPos), 0.0, 1.0);\n    vec3 blue = vec3(0.0, 0.0, 1.0) * clamp(d/distance(vPos, uPlayerPos), 0.0, 1.0);\n    gl_FragColor = vec4(vColor * i + red + blue, 1.0);\n    float border = 0.004;\n    if (abs(vPos.x) > uBoardWidth * 0.5 - border || abs(vPos.z - uBoardZ) > uBoardDepth * 0.5 - border) {\n        gl_FragColor = vec4(0.0, 1.0, 1.0, 1.0);\n    }\n    if (abs(vPos.z - uBoardZ) > uBoardDepth * 0.5 || abs(vPos.x) > uBoardWidth * 0.5) {\n        discard;\n    }\n}\n".split("==SPLIT==");f.surface=new E.Program(c,e[0],e[1]);var e="#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nuniform mat4   uView;\nuniform mat4   uProjection;\nuniform mat4   uModel;\n\nvoid main() {\n    gl_Position = uProjection * uView * uModel * vec4(aPosition, 1.0);\n}\n\n\n==SPLIT==\n\n\n#version 100\nprecision highp float;\n\nuniform vec3 uColor;\nuniform float uAlpha;\n\nvoid main() {\n    gl_FragColor = vec4(uColor, uAlpha);\n}\n".split("==SPLIT==");f.sphere=new E.Program(c,e[0],e[1]);var e="#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\nattribute vec2 aUV;\n\nuniform mat4   uView;\nuniform mat4   uProjection;\nuniform mat4   uModel;\n\nvarying vec2   vUV;\n\nvoid main() {\n    gl_Position = uProjection * uView * uModel * vec4(aPosition, 1.0);\n    vUV = aUV;\n}\n\n\n==SPLIT==\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uSampler;\n\nvarying vec2 vUV;\n\nvoid main() {\n    gl_FragColor = texture2D(uSampler, vUV);\n}\n".split("==SPLIT==");f.text=new E.Program(c,e[0],e[1]),l=new A(c,f.surface),d=new S(c,f.sphere),g=new N(c,1024,100),m={highScore:new R(c,f.text),score:new R(c,f.text),purgatory:new R(c,f.text),pulseReady:new R(c,f.text)},m.highScore.setOptions(32,"Monospace","#FFF","center","rgba(0,0,0,0)"),m.score.setOptions(32,"Monospace","#FFF","center","rgba(0,0,0,0)"),m.purgatory.setOptions(32,"Monospace","#FFF","center","rgba(0,0,0,0.9)",20),m.pulseReady.setOptions(32,"Monospace","#0FF","center","rgba(0,0,0,0)"),m.purgatory.print(D),m.pulseReady.print("Tachyon\nPulse\nReady"),p={},document.addEventListener("keydown",function(e){32===e.which&&"waiting"===k.state?k.state="running":32===e.which&&"running"===k.state&&_.age>L&&(_.age=0,_.center=[v.p.x,v.p.y,v.p.z],h.v.x=0,h.v.y=0,h.v.z=0,b.play()),p[e.which]=!0}),document.addEventListener("keyup",function(e){p[e.which]=!1}),document.addEventListener("keypress",function(e){e.charCode=="f".charCodeAt(0)&&y.fullscreen(),y.capable&&e.charCode=="r".charCodeAt(0)&&y.zero()}),v=new I(U.player.radius,[.5,.5,1],[0,0],d),v.customBehavior=function(){var e=[0,0,0];p[38]&&(e[2]-=1),p[40]&&(e[2]+=1),p[37]&&(e[0]-=1),p[39]&&(e[0]+=1);var n=T.vec2.sub(T.vec2.create(),[v.p.x,v.p.z],[h.p.x,h.p.z]);return T.vec2.length(n)<.01&&(T.vec2.normalize(n,n),T.vec2.scale(n,n,10),e[0]+=n[0],e[2]+=n[1],w.play()),e},h=new I(.005,[1,.5,.5],[0,.1],d),h.customBehavior=function(){var e=T.vec3.create(),n=T.vec2.sub(T.vec2.create(),[v.p.x,v.p.z],[h.p.x,h.p.z]);return T.vec2.normalize(n,n),e[0]=n[0]*o(),e[2]=n[1]*o(),e},_={age:1e3,center:[0,0,0]},u()}},{"./character":10,"./constants":11,"./spacebox":14,"./sphere-renderer":15,"./surface":17,"./surface-manager":16,"./textpanel":18,"./vr":19,"gl-matrix":1,howler:2,"webgl.js":9}],13:[function(e,n){var t=e("gl-matrix");n.exports=function(e,n){"use strict";for(var r=[],a=[],o=0;e>o;o++)for(var i=0;e>i;i++){var u=[0,o+0,i+0],c=[0,o+0,i+1],s=[0,o+1,i+1],f=[0,o+1,i+0];r.push.apply(r,u),r.push.apply(r,c),r.push.apply(r,s),r.push.apply(r,u),r.push.apply(r,s),r.push.apply(r,f);var u=[e,o+0,i+0],c=[e,o+0,i+1],s=[e,o+1,i+1],f=[e,o+1,i+0];r.push.apply(r,u),r.push.apply(r,s),r.push.apply(r,c),r.push.apply(r,u),r.push.apply(r,f),r.push.apply(r,s)}for(var l=0;e>l;l++)for(var i=0;e>i;i++){var u=[l+0,e,i+1],c=[l+1,e,i+1],s=[l+1,e,i+0],f=[l+0,e,i+0];r.push.apply(r,u),r.push.apply(r,c),r.push.apply(r,s),r.push.apply(r,u),r.push.apply(r,s),r.push.apply(r,f);var u=[l+0,0,i+1],c=[l+1,0,i+1],s=[l+1,0,i+0],f=[l+0,0,i+0];r.push.apply(r,u),r.push.apply(r,s),r.push.apply(r,c),r.push.apply(r,u),r.push.apply(r,f),r.push.apply(r,s)}for(var l=0;e>l;l++)for(var o=0;e>o;o++){var u=[l+0,o+0,e],c=[l+1,o+0,e],s=[l+1,o+1,e],f=[l+0,o+1,e];r.push.apply(r,u),r.push.apply(r,c),r.push.apply(r,s),r.push.apply(r,u),r.push.apply(r,s),r.push.apply(r,f);var u=[l+0,o+0,0],c=[l+1,o+0,0],s=[l+1,o+1,0],f=[l+0,o+1,0];r.push.apply(r,u),r.push.apply(r,s),r.push.apply(r,c),r.push.apply(r,u),r.push.apply(r,f),r.push.apply(r,s)}for(var d=0;d<r.length;d++)r[d]-=.5*e;for(var d=0;d<r.length/3;d++){var u=r[3*d+0],c=r[3*d+1],s=r[3*d+2],p=t.vec3.normalize(t.vec3.create(),[u,c,s]);r[3*d+0]=p[0],r[3*d+1]=p[1],r[3*d+2]=p[2],a.push.apply(a,p)}for(var d=0;d<r.length;d++)r[d]*=n;return{position:new Float32Array(r),normal:new Float32Array(a)}}},{"gl-matrix":1}],14:[function(e,n){var t=e("gl-matrix"),r=e("webgl.js");n.exports=function(e,n,a){function o(){var t=document.createElement("canvas");t.width=t.height=n;var r=t.getContext("2d");r.drawImage(canvas,0,0);var a=e.createTexture();return e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),a}canvas=document.createElement("canvas"),canvas.width=canvas.height=n,localGL=canvas.getContext("webgl");var i="#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\nattribute vec3 aPoint;\n\nvarying vec3 vPoint;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1.0);\n    vPoint = aPoint;\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nvarying vec3 vPoint;\n\n// __noise__\n\nfloat stars(vec3 p) {\n    float n = 0.5 * cnoise(p * 512.0) + 0.5;\n    n = pow(n, 16.0);\n    return n;    \n}\n\nfloat nebula(vec3 p) {\n    float scale = 0.5;\n    float mag = 2.0;\n    vec3 offset = p;\n    for (int d = 0; d < 8; d++) {\n        vec3 q = vec3(0.0,0.0,0.0);\n        q.x += mag * cnoise(offset * scale + 1.1);\n        q.y += mag * cnoise(offset * scale + 10.2);\n        q.z += mag * cnoise(offset * scale + 100.3);\n        offset += q;\n        mag *= 0.5;\n        scale *= 2.0;\n    }\n    float i = 0.5 * cnoise(p + offset) + 0.5;\n    i = min(1.0, pow(i, 4.0) * 2.0);\n    return i;\n}\n\nvoid main() {\n    vec3 p = normalize(vPoint);\n    vec3 color = vec3(0.0, 0.0, 0.0);\n    color += vec3(1.0, 1.0, 1.0) * stars(p);\n    color += vec3(1.0, 0.5, 0.0) * nebula(p + 100.0);\n    color += vec3(0.0, 0.5, 1.0) * nebula(p + 1000.0);\n    // color += vec3(0.25, 1.0, 0.25) * nebula(p + 10000.0);\n    gl_FragColor = vec4(color, 1.0);\n}\n",u="//\n// GLSL textureless classic 3D noise cnoise,\n// with an RSL-style periodic variant pnoise.\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n  return 2.2 * n_xyz;\n}\n\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n  vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n  vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n  return 2.2 * n_xyz;\n}";i=i.replace("// __noise__",u),i=i.split("// __split__");var c=new r.Program(localGL,i[0],i[1]);localGL.viewport(0,0,n,n);var s=[-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0],f=[-1,-1,-1,1,-1,-1,1,1,-1,-1,-1,-1,1,1,-1,-1,1,-1],l={aPosition:{buffer:new r.Buffer(localGL),size:3},aPoint:{buffer:new r.Buffer(localGL),size:3}};l.aPosition.buffer.set(new Float32Array(s)),l.aPoint.buffer.set(new Float32Array(f));var d=s.length/9,p=new r.Renderable(localGL,c,l,d);l.aPoint.buffer.set(new Float32Array([-1,-1,-1,1,-1,-1,1,1,-1,-1,-1,-1,1,1,-1,-1,1,-1])),p.render();var v=o();l.aPoint.buffer.set(new Float32Array([1,-1,1,-1,-1,1,-1,1,1,1,-1,1,-1,1,1,1,1,1])),p.render();var h=o();l.aPoint.buffer.set(new Float32Array([-1,1,-1,1,1,-1,1,1,1,-1,1,-1,1,1,1,-1,1,1])),p.render();
var m=o();l.aPoint.buffer.set(new Float32Array([-1,-1,1,1,-1,1,1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,-1])),p.render();var g=o();l.aPoint.buffer.set(new Float32Array([-1,-1,1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,1,-1,-1,1,1])),p.render();var y=o();l.aPoint.buffer.set(new Float32Array([1,-1,-1,1,-1,1,1,1,1,1,-1,-1,1,1,1,1,1,-1])),p.render();var _=o(),i="#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\nattribute vec2 aUV;\n\nuniform mat4   uView;\nuniform mat4   uProjection;\nuniform mat4   uModel;\n\nvarying vec2   vUV;\n\nvoid main() {\n    gl_Position = uProjection * uView * uModel * vec4(aPosition, 1.0);\n    vUV = aUV;\n}\n\n\n==SPLIT==\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uSampler;\n\nvarying vec2 vUV;\n\nvoid main() {\n    gl_FragColor = texture2D(uSampler, vUV);\n}\n".split("==SPLIT=="),c=new r.Program(e,i[0],i[1]),s=[-1,-1,-1,1,-1,-1,1,1,-1,-1,-1,-1,1,1,-1,-1,1,-1],x=[0,0,1,0,1,1,0,0,1,1,0,1],l={aPosition:{buffer:new r.Buffer(e),size:3},aUV:{buffer:new r.Buffer(e),size:2}};l.aPosition.buffer.set(new Float32Array(s)),l.aUV.buffer.set(new Float32Array(x));var d=s.length/9,p=new r.Renderable(e,c,l,d);return function(n,r,o){c.use(),c.setUniform("uView","Matrix4fv",!1,r),c.setUniform("uProjection","Matrix4fv",!1,o);var i=t.mat4.create();t.mat4.translate(i,i,n),t.mat4.scale(i,i,[a,a,a]),c.setUniform("uModel","Matrix4fv",!1,i),e.bindTexture(e.TEXTURE_2D,v),p.render();var i=t.mat4.create();t.mat4.translate(i,i,n),t.mat4.scale(i,i,[a,a,a]),t.mat4.rotateY(i,i,Math.PI),c.setUniform("uModel","Matrix4fv",!1,i),e.bindTexture(e.TEXTURE_2D,h),p.render();var i=t.mat4.create();t.mat4.translate(i,i,n),t.mat4.scale(i,i,[a,a,a]),t.mat4.rotateX(i,i,-Math.PI/2),c.setUniform("uModel","Matrix4fv",!1,i),e.bindTexture(e.TEXTURE_2D,m),p.render();var i=t.mat4.create();t.mat4.translate(i,i,n),t.mat4.scale(i,i,[a,a,a]),t.mat4.rotateX(i,i,Math.PI/2),c.setUniform("uModel","Matrix4fv",!1,i),e.bindTexture(e.TEXTURE_2D,g),p.render();var i=t.mat4.create();t.mat4.translate(i,i,n),t.mat4.scale(i,i,[a,a,a]),t.mat4.rotateY(i,i,Math.PI/2),c.setUniform("uModel","Matrix4fv",!1,i),e.bindTexture(e.TEXTURE_2D,y),p.render();var i=t.mat4.create();t.mat4.translate(i,i,n),t.mat4.scale(i,i,[a,a,a]),t.mat4.rotateY(i,i,-Math.PI/2),c.setUniform("uModel","Matrix4fv",!1,i),e.bindTexture(e.TEXTURE_2D,_),p.render()}}},{"gl-matrix":1,"webgl.js":9}],15:[function(e,n){var t=e("gl-matrix"),r=e("webgl.js"),a=e("./quadsphere");n.exports=function(e,n){function o(){var t=a(8,1),o={aPosition:{buffer:new r.Buffer(e),size:3}};o.aPosition.buffer.set(t.position),i=new r.Renderable(e,n,o,t.position.length/9)}var i,u=this;u.render=function(r,a,o,u,c,s){n.use(),n.setUniform("uView","Matrix4fv",!1,c),n.setUniform("uProjection","Matrix4fv",!1,s);var f=t.mat4.create();t.mat4.translate(f,f,r),t.mat4.scale(f,f,[a,a,a]),n.setUniform("uModel","Matrix4fv",!1,f),n.setUniform("uColor","3fv",o),n.setUniform("uAlpha","1f",u),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),i.render(),e.disable(e.BLEND)},o()}},{"./quadsphere":13,"gl-matrix":1,"webgl.js":9}],16:[function(e,n){{var t=e("webgl.js"),r=e("gl-matrix"),a=e("./constants"),o=new(e("rng").MT)("foo"),i=e("perlin-simplex");new i(o)}n.exports=function(e,n){function o(){f.onmessage=i}function i(r){var a=r.data.chunkIndex,o=r.data.chunk,i={aPosition:{buffer:new t.Buffer(e),size:3},aNormal:{buffer:new t.Buffer(e),size:3},aColor:{buffer:new t.Buffer(e),size:3}};i.aPosition.buffer.set(o.position),i.aNormal.buffer.set(o.normal),i.aColor.buffer.set(o.color);var u=o.position.length/9;c[a]=new t.Renderable(e,n,i,u),delete s[a]}var u=this,c={},s={},f=new Worker("static/surface-worker-bundle.js");u.update=function(e){for(var n={},t=3,r=e-t*a.chunk.depth;r<=e+t*a.chunk.depth;r+=.1*a.chunk.depth){var o=Math.floor(r/a.chunk.depth);n[o]=o}for(key in n)void 0===c[key]&&void 0===s[key]&&(s[key]=!0,f.postMessage({chunkIndex:key}));for(key in c)void 0===n[key]&&delete c[key]},u.render=function(e,t,o,i,u,s){n.use(),n.setUniform("uView","Matrix4fv",!1,i),n.setUniform("uProjection","Matrix4fv",!1,u),n.setUniform("uBoardZ","1f",e),n.setUniform("uBoardDepth","1f",a.board.depth),n.setUniform("uBoardWidth","1f",a.chunk.width),n.setUniform("uPlayerPos","3fv",[t.p.x,t.p.y,t.p.z]),n.setUniform("uChaserPos","3fv",[o.p.x,o.p.y,o.p.z]),n.setUniform("uPulseAge","1f",s.age),n.setUniform("uPulseCenter","3fv",s.center);var f=r.mat4.create();n.setUniform("uModel","Matrix4fv",!1,f);for(var l in c)c[l].render()},o()}},{"./constants":11,"gl-matrix":1,"perlin-simplex":3,rng:7,"webgl.js":9}],17:[function(e,n){function t(e,n){for(var t=0,r=l.chunk.scale,a=l.chunk.height*Math.max(0,Math.min(-n/10,1)),o=0;o<l.chunk.octaves;o++)t+=a*d.noise(e/r,n/r),a*=.5,r*=.5;return t}function r(e,n){var r=.01,a=t(e,n),o=t(e+r,n),i=t(e,n+r);return[(o-a)/r,0,(i-a)/r]}function a(e,n){var t=r(e,n);return[-t[0],-t[1],-t[2]]}function o(e,n){var r=.01,a=t(e,n),o=t(e+r,n),u=t(e,n+r),c=i([e,a,n],[e+r,o,n],[e,u,n+r]);return{p:[e,a,n],n:c}}function i(e,n,t){var r=c.vec3.sub(c.vec3.create(),n,e),a=c.vec3.sub(c.vec3.create(),t,e),o=c.vec3.cross(c.vec3.create(),a,r);return c.vec3.normalize(c.vec3.create(),o)}function u(e){for(var n=[],t=[],r=[],a=l.chunk.depth/l.chunk.res.depth,i=l.chunk.width/l.chunk.res.width,u=0,c=0;c<l.chunk.res.width;c++)for(var s=c/l.chunk.res.width*l.chunk.width-.5*l.chunk.width,f=0;f<l.chunk.res.depth;f++){var d=f/l.chunk.res.depth*l.chunk.depth+e*l.chunk.depth,p=o(s+u,d+a),v=o(s+i,d+a),h=o(s+i,d+u),m=o(s+u,d+u);n.push.apply(n,p.p),n.push.apply(n,v.p),n.push.apply(n,m.p),n.push.apply(n,v.p),n.push.apply(n,h.p),n.push.apply(n,m.p),t.push.apply(t,p.n),t.push.apply(t,v.n),t.push.apply(t,m.n),t.push.apply(t,v.n),t.push.apply(t,h.n),t.push.apply(t,m.n);var h=.02*Math.random()+.25,h=[h,h,h];r.push.apply(r,h),r.push.apply(r,h),r.push.apply(r,h),r.push.apply(r,h),r.push.apply(r,h),r.push.apply(r,h)}return{position:new Float32Array(n),normal:new Float32Array(t),color:new Float32Array(r)}}var c=e("gl-matrix"),s=new(e("rng").MT)("foo"),f=e("perlin-simplex"),l=e("./constants"),d=new f(s);n.exports={getChunk:u,height:t,force:a}},{"./constants":11,"gl-matrix":1,"perlin-simplex":3,rng:7}],18:[function(e,n){var t=e("gl-matrix"),r=e("webgl.js");n.exports=function(e,n){function a(){e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.bindTexture(e.TEXTURE_2D,o.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,o.canvas),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1)}var o=this;initialize=function(){o.size=64,o.font="monospace",o.color="#333",o.align="center",o.background="#FFF",o.padding=8;var t=-.5,i=.5,u=new Float32Array([t,t,0,i,t,0,i,i,0,t,t,0,i,i,0,t,i,0]),c=new Float32Array([0,0,1,0,1,1,0,0,1,1,0,1]),s={aPosition:{buffer:new r.Buffer(e),size:3},aUV:{buffer:new r.Buffer(e),size:2}};s.aPosition.buffer.set(u),s.aUV.buffer.set(c);var f=u.length/9;o.quad=new r.Renderable(e,n,s,f),o.canvas=document.createElement("canvas"),o.canvas.width=o.canvas.height=1,o.ctx=o.canvas.getContext("2d"),o.texture=e.createTexture(),a()},o.setOptions=function(e,n,t,r,a,i){o.size=void 0===e?o.size:e,o.font=void 0===n?o.font:n,o.color=void 0===t?o.color:t,o.align=void 0===r?o.align:r,o.background=void 0===a?o.background:a,o.padding=void 0===i?o.padding:i},o.print=function(e){var n=document.createElement("canvas"),t=n.getContext("2d");e=e.split("\n"),t.font=o.size+"px "+o.font;for(var r=0,i=0;i<e.length;i++)r=Math.max(r,Math.ceil(t.measureText(e[i]).width))+2*o.padding;var u=o.size*e.length+2*o.padding;n.width=r,n.height=u,t.fillStyle=o.background,t.fillRect(0,0,r,u),t.font=o.size+"px "+o.font,t.fillStyle=o.color,t.textAlign=o.align,t.textBaseline="middle";var c,s=o.size/2;"left"===o.align?c=0:"center"===o.align?c=r/2:"right"===o.align&&(c=r);for(var i=0;i<e.length;i++)t.fillText(e[i],c+o.padding,s+o.padding),s+=o.size;for(var f=1,l=1;f<n.width;)f*=2;for(;l<n.height;)l*=2;o.canvas.width=f,o.canvas.height=l,o.ctx.drawImage(n,0,0,f,l),a()},o.render=function(r,a,i,u){n.use(),n.setUniform("uView","Matrix4fv",!1,a),n.setUniform("uProjection","Matrix4fv",!1,i);var c=t.mat4.create();t.mat4.scale(c,r,[u*o.canvas.width,u*o.canvas.height,1]),n.setUniform("uModel","Matrix4fv",!1,c),e.bindTexture(e.TEXTURE_2D,o.texture),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),o.quad.render(),e.disable(e.BLEND),e.bindTexture(e.TEXTURE_2D,null)},initialize()}},{"gl-matrix":1,"webgl.js":9}],19:[function(e,n){var t=e("gl-matrix");n.exports=function(e,n){"use strict";function r(){d=t.vec3.create(),p=t.quat.create(),v.capable=!0,v.initialized=!1;try{navigator.getVRDevices().then(function(e){for(var n=0;n<e.length;n++)if(e[n]instanceof HMDVRDevice){u=e[n];break}for(var n=0;n<e.length;n++)if(e[n]instanceof PositionSensorVRDevice&&e[n].hardwareUnitId==u.hardwareUnitId){c=e[n];break}var r=u.getEyeTranslation("left");s=t.vec3.length(t.vec3.fromValues(r.x,r.y,r.z)),f=u.getRecommendedEyeFieldOfView("left"),l=u.getRecommendedEyeFieldOfView("right"),v.initialized=!0})}catch(e){console.warn("Unable to initialize VR."),v.capable=!1}}function a(e){var n=2/(e.leftTan+e.rightTan),t=(e.leftTan-e.rightTan)*n*.5,r=2/(e.upTan+e.downTan),a=(e.upTan-e.downTan)*r*.5;return{scale:[n,r],offset:[t,a]}}function o(e,n,r,o){n=void 0===n?!0:n,r=void 0===r?.01:r,o=void 0===o?1e4:o;var i=n?-1:1,u=t.mat4.create(),c=a(e);return u[0]=c.scale[0],u[1]=0,u[2]=c.offset[0]*i,u[3]=0,u[4]=0,u[5]=c.scale[1],u[6]=-c.offset[1]*i,u[7]=0,u[8]=0,u[9]=0,u[10]=o/(r-o)*-i,u[11]=o*r/(r-o),u[12]=0,u[13]=0,u[14]=i,u[15]=0,t.mat4.transpose(u,u),u}function i(e,n,t,r){var a={upTan:Math.tan(e.upDegrees*Math.PI/180),downTan:Math.tan(e.downDegrees*Math.PI/180),leftTan:Math.tan(e.leftDegrees*Math.PI/180),rightTan:Math.tan(e.rightDegrees*Math.PI/180)};return o(a,n,t,r)}var u,c,s,f,l,d,p,v=this;v.fullscreen=function(){n.webkitRequestFullscreen({vrDisplay:u})},v.zero=function(){c.zeroSensor()},v.render=function(r,a,o){var u=i(f,!0,a,o),d=i(l,!0,a,o),p=t.vec3.fromValues(1,0,0),v=c.getState(),h=v.orientation,m=t.quat.fromValues(h.x,h.y,h.z,h.w);t.vec3.transformQuat(p,p,m),t.vec3.scale(p,p,s);var g=v.position,y=t.vec3.fromValues(g.x,g.y,g.z);t.vec3.sub(y,y,p);var _=t.vec3.fromValues(g.x,g.y,g.z);t.vec3.add(_,_,p);var x=t.vec3.fromValues(0,0,-1),w=t.vec3.fromValues(0,1,0);t.vec3.transformQuat(x,x,m),t.vec3.transformQuat(w,w,m),e.enable(e.SCISSOR_TEST);var b=n.width/2,P=n.height;e.viewport(0,0,b,P),e.scissor(0,0,b,P),r(u,y,x,w),e.viewport(b,0,b,P),e.scissor(b,0,b,P),r(d,_,x,w),e.disable(e.SCISSOR_TEST)},r()}},{"gl-matrix":1}]},{},[12]);